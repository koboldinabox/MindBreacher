<!DOCTYPE html>
<script>
// [x,y,z, type, group]
// type -> [0 = "not existing", 1 = "external", 2 = "internal", 3 = "goal"]
// group -> [0 = "none", 1 = "outer rim", 2 = "inner rim", 3 = "center"]

var memosGrid = [[1,1,1,0,1],[1,1,2,0,1],[1,1,3,0,1],[1,1,4,0,1],[1,1,5,0,1],
				 [1,2,1,0,1],[1,2,2,0,1],[1,2,3,0,1],[1,2,4,0,1],[1,2,5,0,1],
				 [1,3,1,0,1],[1,3,2,0,1],[1,3,3,0,1],[1,3,4,0,1],[1,3,5,0,1],
				 [1,4,1,0,1],[1,4,2,0,1],[1,4,3,0,1],[1,4,4,0,1],[1,4,5,0,1],
				 [1,5,1,0,1],[1,5,2,0,1],[1,5,3,0,1],[1,5,4,0,1],[1,5,5,0,1],
				                                                         
				 [2,1,1,0,1],[2,1,2,0,1],[2,1,3,0,1],[2,1,4,0,1],[2,1,5,0,1],
				 [2,2,1,0,1],[2,2,2,0,0],[2,2,3,0,0],[2,2,4,0,0],[2,2,5,0,1],
				 [2,3,1,0,1],[2,3,2,0,0],[2,3,3,0,2],[2,3,4,0,0],[2,3,5,0,1],
				 [2,4,1,0,1],[2,4,2,0,0],[2,4,3,0,0],[2,4,4,0,0],[2,4,5,0,1],
				 [2,5,1,0,1],[2,5,2,0,1],[2,5,3,0,1],[2,5,4,0,1],[2,5,5,0,1],
				                                                         
				 [3,1,1,0,1],[3,1,2,0,1],[3,1,3,0,1],[3,1,4,0,1],[3,1,5,0,1],
				 [3,2,1,0,1],[3,2,2,0,0],[3,2,3,0,2],[3,2,4,0,0],[3,2,5,0,1],
				 [3,3,1,0,1],[3,3,2,0,2],[3,3,3,0,3],[3,3,4,0,2],[3,3,5,0,1],
				 [3,4,1,0,1],[3,4,2,0,0],[3,4,3,0,2],[3,4,4,0,0],[3,4,5,0,1],
				 [3,5,1,0,1],[3,5,2,0,1],[3,5,3,0,1],[3,5,4,0,1],[3,5,5,0,1],
				                                                         
				 [4,1,1,0,1],[4,1,2,0,1],[4,1,3,0,1],[4,1,4,0,1],[4,1,5,0,1],
				 [4,2,1,0,1],[4,2,2,0,0],[4,2,3,0,0],[4,2,4,0,0],[4,2,5,0,1],
				 [4,3,1,0,1],[4,3,2,0,0],[4,3,3,0,2],[4,3,4,0,0],[4,3,5,0,1],
				 [4,4,1,0,1],[4,4,2,0,0],[4,4,3,0,0],[4,4,4,0,0],[4,4,5,0,1],
				 [4,5,1,0,1],[4,5,2,0,1],[4,5,3,0,1],[4,5,4,0,1],[4,5,5,0,1],
				                                                         
				 [5,1,1,0,1],[5,1,2,0,1],[5,1,3,0,1],[5,1,4,0,1],[5,1,5,0,1],
				 [5,2,1,0,1],[5,2,2,0,1],[5,2,3,0,1],[5,2,4,0,1],[5,2,5,0,1],
				 [5,3,1,0,1],[5,3,2,0,1],[5,3,3,0,1],[5,3,4,0,1],[5,3,5,0,1],
				 [5,4,1,0,1],[5,4,2,0,1],[5,4,3,0,1],[5,4,4,0,1],[5,4,5,0,1],
				 [5,5,1,0,1],[5,5,2,0,1],[5,5,3,0,1],[5,5,4,0,1],[5,5,5,0,1]];
	
	var colorType = [["red","#c82124"],["blue","#0066ff"],["black","#000000"]];
	
    var canvas;
    var ctx; 
	
	var listaMemo = new Array();
	var linkGrid = new Array();

function drawGrid(w, h) {

	ctx.canvas.width  = w;
    ctx.canvas.height = h;	
	
	var cellWidth = 100;
	var cellHeight = 100;
	
    for (x=0;x<=w;x+=cellWidth) {
        for (y=0;y<=h;y+=cellHeight) {
            ctx.moveTo(x, 0);
            ctx.lineTo(x, h);
            ctx.stroke();
            ctx.moveTo(0, y);
            ctx.lineTo(w, y);
            ctx.stroke();
        }
    }
};
	
function drawView(player){
	
	var memW;
	var memH;
	
	drawGrid(500, 500);
	
	for(i=0;i<125;i++){
	

		if(memosGrid[i][3]>0){
		
			if(player==1){
				memW = memosGrid[i][0];
				memH = memosGrid[i][1];
			}
			
			if(player==2){
				memW = memosGrid[i][1];
				memH = memosGrid[i][2];
			}
			
			if(player==3){
				memW = memosGrid[i][0];
				memH = memosGrid[i][2];
			}
			
			drawCircle(memW, memH, i);
			//console.log("memo for player "+ player +" drawn at (" + memH + ", " + memW + ")");
		}
	}
}

function drawCircle(memW, memH, index){

	ctx.beginPath();
	ctx.moveTo(memW*100,((memH-1)*100)+50);
	ctx.arc((memW*100)-50,((memH-1)*100)+50, 50, 0, 2 * Math.PI);
	ctx.fillStyle = colorType[memosGrid[i][3]-1][1]; 
	ctx.fill();
	ctx.stroke();
	ctx.font = "30px Arial";
	ctx.fillStyle = "white";
	ctx.textAlign = "center";
	ctx.fillText(index,(memW*100)-50 ,((memH-1)*100)+50);

}

function populateGrid(amount,type){
		
		var i = 0;
		
		while(i<amount) {
		
		var rand = Math.floor(Math.random() * 124);

			if(memosGrid[rand][3]==0 && memosGrid[rand][4] == type){
			
				memosGrid[rand][3]=type;
				
				console.log(colorType[type-1][0] +" memo in position " + rand + " activated");
				listaMemo.push(rand);
				console.log(listaMemo);
				i++;
				
			}
		}
}	

function setCenter(){
		
			
	memosGrid[62][3]=3;			
	console.log("center memo activated");

		}	
		
function reset(){

 for(i=0;i<125;i++){
 
	memosGrid[i][3] = 0;
 
  }

}

function genera(){

reset();
setCenter();
populateGrid(3,2);
populateGrid(6,1);
creaLink();

}

function creaLink(){



}

function drawLink(mem1,mem2, player){

	var mem1X;
	var mem1Y;
	
	var mem2X;
	var mem2Y;
	
	if(player==1){
		mem1X = memosGrid[mem1][0];
		mem1Y = memosGrid[mem1][1];
		
		mem2X = memosGrid[mem2][0];
		mem2Y = memosGrid[mem2][1];
	}   
		
	if(player==2){
		mem1X = memosGrid[mem1][1];
		mem1Y = memosGrid[mem1][2];
		
		mem2X = memosGrid[mem2][1];
		mem2Y = memosGrid[mem2][2];
	}   
		
	if(player==3){
		mem1X = memosGrid[mem1][0];
		mem1Y = memosGrid[mem1][2];
		
		mem2X = memosGrid[mem2][0];
		mem2Y = memosGrid[mem2][2];
	}

	ctx.beginPath();
	ctx.moveTo(mem1X+50, mem1Y+50);
	ctx.lineTo(mem2X+50, mem2X+50);
	ctx.stroke();

}
				
window.addEventListener('load', function () {

	canvas = document.getElementById("grid");
	ctx = canvas.getContext('2d');

	canvas.addEventListener('click', function(e) {
    getCursorPosition(canvas, e)
})

});

function getCursorPosition(canvas, event) {
    const rect = canvas.getBoundingClientRect()
    const x = event.clientX - rect.left
    const y = event.clientY - rect.top
	
	var boxX = Math.round((x+50)/100);
	var boxY = Math.round((y+50)/100);
		
	//var memosIndex = ((boxY-1)*5)+boxX;
	
  // console.log("x: " + x + " y: " + y + ". The selected box is: ( "+ boxX + ", "+ boxY +"), which is number " + memosIndex);
}



</script>
<html>
<body>
<canvas id="grid"></canvas>
<!-- <div>
 <canvas id="layer1" style="position: z-index: 0;"></canvas>
 <canvas id="layer2" style="position: z-index: 1;"></canvas>
</div> -->

<button onclick='genera();'>Genera Griglia</button>
<button onclick='drawView(1);'>Giocatore 1</button>
<button onclick='drawView(2);'>Giocatore 2</button>
<button onclick='drawView(3);'>Giocatore 3</button>

</body>
</html>